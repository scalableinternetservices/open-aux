<html>
   <body>
      <% provide(:title, "playlist") %>

      <div class="row justify-content-center">
         <h1> Playlist Name: <%= @playlist.name %> </h1>
         <div class="col-md-6 col-md-offset-3">
            <br>
            <div class="user-playlists"></div>
            <%= form_for(@playlist, url: playlist_path) do |f| %>

            <%= f.text_field :name, class: "form-control", method: :post %>
            <br>
            <%= f.submit "Create my Playlist", class: "btn btn-primary" %>
            <% end %>
         </div>
      </div>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
      <script type="text/javascript">
         $(document).ready(function(){   
            $.ajax({
               url: "/user-playlists",
               method: "GET",
               dataType: "json",
               success: function(data) {
                  var htmlString = "";

                  if (data.res.length > 0) {
                     htmlString += "<h2>Current playlists:</h2>";
                  } else {
                     htmlString += "<h2>No playlists available.</h2>";
                  } 

                  for (var i = 0; i < data.res.length; i++) {
                     function handleClick() {
                        console.log("hello");
                     }

                     htmlString += `<button class="btn-lg btn-primary" onClick="handleClick()">${data.res[i].name}</button><br><br>`;
                  }

                  $(".user-playlists").append(htmlString);
               }
            });
         })
      </script>
   </body>
</html>